{"version":3,"file":"cytoscape-mapbox-gl.js","sources":["../node_modules/@babel/runtime/helpers/arrayWithHoles.js","../node_modules/@babel/runtime/helpers/iterableToArrayLimit.js","../node_modules/@babel/runtime/helpers/arrayLikeToArray.js","../node_modules/@babel/runtime/helpers/unsupportedIterableToArray.js","../node_modules/@babel/runtime/helpers/nonIterableRest.js","../node_modules/@babel/runtime/helpers/slicedToArray.js","../node_modules/@babel/runtime/helpers/classCallCheck.js","../node_modules/@babel/runtime/helpers/createClass.js","../node_modules/@babel/runtime/helpers/defineProperty.js","../src/mapbox-gl-handler.js","../src/index.js"],"sourcesContent":["function _arrayWithHoles(arr) {\n  if (Array.isArray(arr)) return arr;\n}\n\nmodule.exports = _arrayWithHoles;","function _iterableToArrayLimit(arr, i) {\n  if (typeof Symbol === \"undefined\" || !(Symbol.iterator in Object(arr))) return;\n  var _arr = [];\n  var _n = true;\n  var _d = false;\n  var _e = undefined;\n\n  try {\n    for (var _i = arr[Symbol.iterator](), _s; !(_n = (_s = _i.next()).done); _n = true) {\n      _arr.push(_s.value);\n\n      if (i && _arr.length === i) break;\n    }\n  } catch (err) {\n    _d = true;\n    _e = err;\n  } finally {\n    try {\n      if (!_n && _i[\"return\"] != null) _i[\"return\"]();\n    } finally {\n      if (_d) throw _e;\n    }\n  }\n\n  return _arr;\n}\n\nmodule.exports = _iterableToArrayLimit;","function _arrayLikeToArray(arr, len) {\n  if (len == null || len > arr.length) len = arr.length;\n\n  for (var i = 0, arr2 = new Array(len); i < len; i++) {\n    arr2[i] = arr[i];\n  }\n\n  return arr2;\n}\n\nmodule.exports = _arrayLikeToArray;","var arrayLikeToArray = require(\"./arrayLikeToArray\");\n\nfunction _unsupportedIterableToArray(o, minLen) {\n  if (!o) return;\n  if (typeof o === \"string\") return arrayLikeToArray(o, minLen);\n  var n = Object.prototype.toString.call(o).slice(8, -1);\n  if (n === \"Object\" && o.constructor) n = o.constructor.name;\n  if (n === \"Map\" || n === \"Set\") return Array.from(o);\n  if (n === \"Arguments\" || /^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)) return arrayLikeToArray(o, minLen);\n}\n\nmodule.exports = _unsupportedIterableToArray;","function _nonIterableRest() {\n  throw new TypeError(\"Invalid attempt to destructure non-iterable instance.\\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.\");\n}\n\nmodule.exports = _nonIterableRest;","var arrayWithHoles = require(\"./arrayWithHoles\");\n\nvar iterableToArrayLimit = require(\"./iterableToArrayLimit\");\n\nvar unsupportedIterableToArray = require(\"./unsupportedIterableToArray\");\n\nvar nonIterableRest = require(\"./nonIterableRest\");\n\nfunction _slicedToArray(arr, i) {\n  return arrayWithHoles(arr) || iterableToArrayLimit(arr, i) || unsupportedIterableToArray(arr, i) || nonIterableRest();\n}\n\nmodule.exports = _slicedToArray;","function _classCallCheck(instance, Constructor) {\n  if (!(instance instanceof Constructor)) {\n    throw new TypeError(\"Cannot call a class as a function\");\n  }\n}\n\nmodule.exports = _classCallCheck;","function _defineProperties(target, props) {\n  for (var i = 0; i < props.length; i++) {\n    var descriptor = props[i];\n    descriptor.enumerable = descriptor.enumerable || false;\n    descriptor.configurable = true;\n    if (\"value\" in descriptor) descriptor.writable = true;\n    Object.defineProperty(target, descriptor.key, descriptor);\n  }\n}\n\nfunction _createClass(Constructor, protoProps, staticProps) {\n  if (protoProps) _defineProperties(Constructor.prototype, protoProps);\n  if (staticProps) _defineProperties(Constructor, staticProps);\n  return Constructor;\n}\n\nmodule.exports = _createClass;","function _defineProperty(obj, key, value) {\n  if (key in obj) {\n    Object.defineProperty(obj, key, {\n      value: value,\n      enumerable: true,\n      configurable: true,\n      writable: true\n    });\n  } else {\n    obj[key] = value;\n  }\n\n  return obj;\n}\n\nmodule.exports = _defineProperty;","import mapboxgl from 'mapbox-gl';\n\n/** @typedef {import('cytoscape')} cytoscape */\n/** @typedef {import('./mapbox-gl-handler').MapboxglHandlerOptions} MapboxglHandlerOptions */\n\n/**\n * @param {MouseEvent} event\n * @see https://github.com/cytoscape/cytoscape.js/blob/master/src/extensions/renderer/base/load-listeners.js\n */\nfunction isMultSelKeyDown(event) {\n  return event.shiftKey || event.metaKey || event.ctrlKey; // maybe event.altKey\n}\n\nconst DEFAULT_FIT_PADDING = 50;\nconst DEFAULT_ANIMATION_DURATION = 500;\nconst HIDDEN_CLASS = 'cytoscape-mapbox-gl__hidden';\n\nexport class MapboxglHandler {\n  /** @type cytoscape.Core */\n  cy;\n  /** @type mapboxgl.MapboxOptions */\n  mapboxOptions;\n  /** @type MapboxglHandlerOptions */\n  options;\n\n  /** @type HTMLElement */\n  mapContainer;\n  /** @type mapboxgl.Map */\n  map;\n\n  /** @type boolean | undefined */\n  originalAutoungrabify;\n  /** @type boolean | undefined */\n  originalUserZoomingEnabled;\n  /** @type boolean | undefined */\n  originalUserPanningEnabled;\n\n  /** @type cytoscape.NodePositionMap | undefined */\n  originalPositions;\n  /** @type number | undefined */\n  originalZoom;\n  /** @type cytoscape.Position | undefined */\n  originalPan;\n\n  /** @type boolean */\n  panning = false;\n\n  onGraphContainerMouseDownBound = this.onGraphContainerMouseDown.bind(this);\n  onGraphContainerMouseMoveBound = this.onGraphContainerMouseMove.bind(this);\n  onGraphContainerWheelBound = this.onGraphContainerWheel.bind(this);\n  onMapMoveBound = this.onMapMove.bind(this);\n\n  onGraphAddBound = this.onGraphAdd.bind(this);\n  onGraphResizeBound = this.onGraphResize.bind(this);\n  onGraphDragFreeBound = this.onGraphDragFree.bind(this);\n\n  /**\n   * @param {cytoscape.Core} cy\n   * @param {mapboxgl.MapboxOptions} mapboxOptions\n   * @param {MapboxglHandlerOptions} options\n   */\n  constructor(cy, mapboxOptions, options) {\n    this.cy = cy;\n    this.mapboxOptions = mapboxOptions;\n    this.options = options;\n\n    if (!(this.options.getPosition instanceof Function)) {\n      throw new Error('getPosition should be a function');\n    }\n    if (this.options.setPosition && !(this.options.setPosition instanceof Function)) {\n      throw new Error('setPosition should be a function');\n    }\n\n    // Cytoscape config\n    this.originalAutoungrabify = this.cy.autoungrabify();\n    this.originalUserZoomingEnabled = this.cy.userZoomingEnabled();\n    this.originalUserPanningEnabled = this.cy.userPanningEnabled();\n\n    this.cy.userZoomingEnabled(false);\n    this.cy.userPanningEnabled(false);\n\n    // Cytoscape events\n    const graphContainer = /** @type HTMLElement */ (this.cy.container());\n    graphContainer.addEventListener('mousedown', this.onGraphContainerMouseDownBound);\n    graphContainer.addEventListener('mousemove', this.onGraphContainerMouseMoveBound);\n    graphContainer.addEventListener('wheel', this.onGraphContainerWheelBound);\n    this.cy.on('add', this.onGraphAddBound);\n    this.cy.on('resize', this.onGraphResizeBound);\n    this.cy.on('dragfree', this.onGraphDragFreeBound);\n\n    // Mapbox GL container\n    this.mapContainer = document.createElement('div');\n    this.mapContainer.style.position = 'absolute';\n    this.mapContainer.style.top = '0px';\n    this.mapContainer.style.left = '0px';\n    this.mapContainer.style.width = '100%';\n    this.mapContainer.style.height = '100%';\n    graphContainer.insertBefore(this.mapContainer, this.cy.renderer().data.canvasContainer);\n\n    // Mapbox GL instance\n    this.map = new mapboxgl.Map({\n      ...this.mapboxOptions,\n      container: this.mapContainer,\n    });\n    this.fit(undefined, { padding: DEFAULT_FIT_PADDING, animate: false });\n\n    // Mapbox GL events\n    this.map.on('move', this.onMapMoveBound);\n\n    // Cytoscape unit viewport\n    this.originalZoom = this.cy.zoom();\n    this.originalPan = {...this.cy.pan()};\n\n    const zoom = 1;\n    const pan = { x: 0, y: 0 };\n\n    if (this.options.animate) {\n      this.cy.animate({\n        zoom: zoom,\n        pan: pan,\n      }, {\n        duration: this.options.animationDuration ?? DEFAULT_ANIMATION_DURATION,\n        easing: 'linear',\n      });\n    } else {\n      this.cy.viewport(\n        zoom,\n        pan\n      );\n    }\n\n    // Cytoscape positions\n    this.enableGeographicPositions();\n  }\n\n  destroy() {\n    // Cytoscape events\n    const graphContainer = /** @type HTMLElement */ (this.cy.container());\n    graphContainer.removeEventListener('mousedown', this.onGraphContainerMouseDownBound);\n    graphContainer.removeEventListener('mousemove', this.onGraphContainerMouseMoveBound);\n    graphContainer.removeEventListener('wheel', this.onGraphContainerWheelBound);\n    this.cy.off('add', this.onGraphAddBound);\n    this.cy.off('resize', this.onGraphResizeBound);\n    this.cy.off('dragfree', this.onGraphDragFreeBound);\n\n    // Cytoscape config\n    this.cy.autoungrabify(this.originalAutoungrabify);\n    this.cy.userZoomingEnabled(this.originalUserZoomingEnabled);\n    this.cy.userPanningEnabled(this.originalUserPanningEnabled);\n\n    this.originalAutoungrabify = undefined;\n    this.originalUserZoomingEnabled = undefined;\n    this.originalUserPanningEnabled = undefined;\n\n    // Mapbox GL events\n    this.map.off('move', this.onMapMoveBound);\n\n    // Mapbox GL instance\n    this.map.remove();\n    this.map = undefined;\n\n    // Mapbox GL container\n    this.mapContainer.remove();\n    this.mapContainer = undefined;\n\n    // Cytoscape unit viewport\n    if (this.options.animate) {\n      this.cy.animate({\n        zoom: this.originalZoom,\n        pan: this.originalPan,\n      }, {\n        duration: this.options.animationDuration ?? DEFAULT_ANIMATION_DURATION,\n        easing: 'linear',\n      });\n    } else {\n      this.cy.viewport(\n        this.originalZoom,\n        this.originalPan\n      );\n    }\n\n    this.originalZoom = undefined;\n    this.originalPan = undefined;\n\n    // Cytoscape positions\n    this.disableGeographicPositions();\n\n    this.cy = undefined;\n    this.options = undefined;\n  }\n\n  /**\n   * @param {cytoscape.NodeCollection} nodes\n   * @param {mapboxgl.FitBoundsOptions} options\n   */\n  fit(nodes = this.cy.nodes(), options) {\n    const bounds = this.getNodeLngLatBounds(nodes);\n    if (bounds.isEmpty()) {\n      return;\n    }\n\n    this.map.fitBounds(bounds, options);\n  }\n\n  /**\n   * @private\n   */\n  enableGeographicPositions() {\n    const nodes = this.cy.nodes();\n\n    this.originalPositions = Object.fromEntries(nodes.map(node => {\n      return [node.id(), {...node.position()}];\n    }));\n\n    const positions = /** @type cytoscape.NodePositionMap */ (Object.fromEntries(\n      /** @type [string, cytoscape.Position | undefined][] */ (nodes.map(node => {\n        return [node.id(), this.getGeographicPosition(node)];\n      })).filter(([_id, position]) => {\n        return !!position;\n      })\n    ));\n\n    // hide nodes without position\n    const nodesWithoutPosition = nodes.filter(node => !positions[node.id()]);\n    nodesWithoutPosition.addClass(HIDDEN_CLASS).style('display', 'none');\n\n    this.cy.layout({\n      name: 'preset',\n      positions: positions,\n      fit: false,\n      animate: this.options.animate,\n      animationDuration: this.options.animationDuration ?? DEFAULT_ANIMATION_DURATION,\n      animationEasing: 'ease-out-cubic',\n    }).run();\n  }\n\n  /**\n   * @private\n   * @param {cytoscape.NodeCollection} nodes\n   */\n  updateGeographicPositions(nodes = this.cy.nodes()) {\n    const positions = /** @type cytoscape.NodePositionMap */ (Object.fromEntries(\n      /** @type [string, cytoscape.Position | undefined][] */ (nodes.map(node => {\n        return [node.id(), this.getGeographicPosition(node)];\n      })).filter(([_id, position]) => {\n        return !!position;\n      })\n    ));\n\n    // update only positions which have changed, for cytoscape-edgehandles compatibility\n    const currentPositions = /** @type cytoscape.NodePositionMap */ (Object.fromEntries(nodes.map(node => {\n      return [node.id(), {...node.position()}];\n    })));\n    const updatedPositions = /** @type cytoscape.NodePositionMap */ (Object.fromEntries(\n      Object.entries(positions).filter(([id, position]) => {\n        const currentPosition = currentPositions[id];\n        return !this.arePositionsEqual(currentPosition, position);\n      })\n    ));\n\n    // hide nodes without position\n    const nodesWithoutPosition = nodes.filter(node => !positions[node.id()]);\n    nodesWithoutPosition.addClass(HIDDEN_CLASS).style('display', 'none');\n\n    this.cy.layout({\n      name: 'preset',\n      positions: updatedPositions,\n      fit: false,\n    }).run();\n  }\n\n  /**\n   * @private\n   */\n  disableGeographicPositions() {\n    const nodes = this.cy.nodes();\n\n    this.cy.layout({\n      name: 'preset',\n      positions: this.originalPositions,\n      fit: false,\n      animate: this.options.animate,\n      animationDuration: this.options.animationDuration ?? DEFAULT_ANIMATION_DURATION,\n      animationEasing: 'ease-in-cubic',\n      stop: () => {\n        // show nodes without position\n        const nodesWithoutPosition = nodes.filter(node => node.hasClass(HIDDEN_CLASS));\n        nodesWithoutPosition.removeClass(HIDDEN_CLASS).style('display', null);\n      }\n    }).run();\n\n    this.originalPositions = undefined;\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} event\n   */\n  onGraphContainerMouseDown(event) {\n    if (\n      event.buttons === 1 &&\n      !isMultSelKeyDown(event) &&\n      !this.cy.renderer().hoverData.down\n    ) {\n      this.cy.renderer().hoverData.dragging = true; // cytoscape-lasso compatibility\n      this.dispatchMapEvent(event);\n\n      document.addEventListener('mouseup', () => {\n        if (!this.panning) {\n          return;\n        }\n\n        this.panning = false;\n\n        // prevent unselecting in Cytoscape mouseup\n        this.cy.renderer().hoverData.dragged = true;\n      }, { once: true });\n    }\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} event\n   */\n  onGraphContainerMouseMove(event) {\n    if (\n      event.buttons === 1 &&\n      !isMultSelKeyDown(event) &&\n      !this.cy.renderer().hoverData.down\n    ) {\n      this.panning = true;\n\n      this.dispatchMapEvent(event);\n    }\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} event\n   */\n  onGraphContainerWheel(event) {\n    this.dispatchMapEvent(event);\n  }\n\n  /**\n   * @private\n   */\n  onMapMove() {\n    this.updateGeographicPositions();\n  }\n\n  /**\n   * @private\n   * @param {cytoscape.EventObject} event\n   */\n  onGraphAdd(event) {\n    if (!event.target.isNode()) {\n      return;\n    }\n\n    const node = /** @type cytoscape.NodeSingular */ (event.target);\n\n    this.originalPositions[node.id()] = {...node.position()};\n\n    const nodes = this.cy.collection().merge(node);\n    this.updateGeographicPositions(nodes);\n  }\n\n  /**\n   * @private\n   */\n  onGraphResize() {\n    this.map.resize();\n  }\n\n  /**\n   * @private\n   * @param {cytoscape.EventObject} event\n   */\n  onGraphDragFree(event) {\n    const node = /** @type cytoscape.NodeSingular */ (event.target);\n\n    if (this.options.setPosition) {\n      const lngLat = this.map.unproject(node.position());\n      this.options.setPosition(node, lngLat);\n    }\n\n    const nodes = this.cy.collection().merge(node);\n    this.updateGeographicPositions(nodes);\n  }\n\n  /**\n   * @private\n   * @param {MouseEvent} event\n   */\n  dispatchMapEvent(event) {\n    if (event.target === this.mapContainer || this.mapContainer.contains(event.target)) {\n      return;\n    }\n\n    const clonedEvent = new event.constructor(event.type, event);\n    this.map.getCanvas().dispatchEvent(clonedEvent);\n  }\n\n  /**\n   * @private\n   * @param {cytoscape.NodeSingular} node\n   * @return {mapboxgl.LngLat | undefined}\n   */\n  getNodeLngLat(node) {\n    const lngLatLike = this.options.getPosition(node);\n    if (!lngLatLike) {\n      return;\n    }\n\n    let lngLat;\n    try {\n      lngLat = mapboxgl.LngLat.convert(lngLatLike);\n    } catch (e) {\n      return;\n    }\n\n    return lngLat;\n  }\n\n  /**\n   * @private\n   * @param {cytoscape.NodeCollection} nodes\n   * @return {mapboxgl.LngLatBounds}\n   */\n  getNodeLngLatBounds(nodes = this.cy.nodes()) {\n    const bounds = nodes.reduce((bounds, node) => {\n      const lngLat = this.getNodeLngLat(node);\n      if (!lngLat) {\n        return bounds;\n      }\n\n      return bounds.extend(lngLat);\n    }, new mapboxgl.LngLatBounds());\n    return bounds;\n  }\n\n  /**\n   * @private\n   * @param {cytoscape.NodeSingular} node\n   * @return {cytoscape.Position | undefined}\n   */\n  getGeographicPosition(node) {\n    const lngLat = this.getNodeLngLat(node);\n    if (!lngLat) {\n      return;\n    }\n\n    const position = this.map.project(lngLat);\n    return position;\n  }\n\n  /**\n   * @private\n   * @param {cytoscape.Position} position1\n   * @param {cytoscape.Position} position2\n   * @return {boolean}\n   */\n  arePositionsEqual(position1, position2) {\n    return position1.x === position2.x && position1.y === position2.y;\n  }\n}","import { MapboxglHandler } from './mapbox-gl-handler';\n\nfunction register(cytoscape) {\n  if (!cytoscape) {\n    return;\n  }\n\n  cytoscape('core', 'mapboxgl', function(mapboxglConfig, config) {\n    return new MapboxglHandler(this, mapboxglConfig, config);\n  });\n}\n\nif (typeof window.cytoscape !== 'undefined') {\n  register(window.cytoscape);\n}\n\nexport default register;"],"names":["_arrayWithHoles","arr","Array","isArray","_iterableToArrayLimit","i","Symbol","iterator","Object","_arr","_n","_d","_e","undefined","_i","_s","next","done","push","value","length","err","_arrayLikeToArray","len","arr2","_unsupportedIterableToArray","o","minLen","arrayLikeToArray","n","prototype","toString","call","slice","constructor","name","from","test","_nonIterableRest","TypeError","_slicedToArray","arrayWithHoles","iterableToArrayLimit","unsupportedIterableToArray","nonIterableRest","_classCallCheck","instance","Constructor","_defineProperties","target","props","descriptor","enumerable","configurable","writable","defineProperty","key","_createClass","protoProps","staticProps","_defineProperty","obj","isMultSelKeyDown","event","shiftKey","metaKey","ctrlKey","DEFAULT_FIT_PADDING","DEFAULT_ANIMATION_DURATION","HIDDEN_CLASS","MapboxglHandler","cy","mapboxOptions","options","onGraphContainerMouseDown","bind","onGraphContainerMouseMove","onGraphContainerWheel","onMapMove","onGraphAdd","onGraphResize","onGraphDragFree","getPosition","Function","Error","setPosition","originalAutoungrabify","autoungrabify","originalUserZoomingEnabled","userZoomingEnabled","originalUserPanningEnabled","userPanningEnabled","graphContainer","container","addEventListener","onGraphContainerMouseDownBound","onGraphContainerMouseMoveBound","onGraphContainerWheelBound","on","onGraphAddBound","onGraphResizeBound","onGraphDragFreeBound","mapContainer","document","createElement","style","position","top","left","width","height","insertBefore","renderer","data","canvasContainer","map","mapboxgl","Map","fit","padding","animate","onMapMoveBound","originalZoom","zoom","originalPan","pan","x","y","duration","animationDuration","easing","viewport","enableGeographicPositions","removeEventListener","off","remove","disableGeographicPositions","nodes","bounds","getNodeLngLatBounds","isEmpty","fitBounds","originalPositions","fromEntries","node","id","positions","getGeographicPosition","filter","_id","nodesWithoutPosition","addClass","layout","animationEasing","run","currentPositions","updatedPositions","entries","currentPosition","arePositionsEqual","stop","hasClass","removeClass","buttons","hoverData","down","dragging","dispatchMapEvent","panning","dragged","once","updateGeographicPositions","isNode","collection","merge","resize","lngLat","unproject","contains","clonedEvent","type","getCanvas","dispatchEvent","lngLatLike","LngLat","convert","e","reduce","getNodeLngLat","extend","LngLatBounds","project","position1","position2","register","cytoscape","mapboxglConfig","config","window"],"mappings":"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"}